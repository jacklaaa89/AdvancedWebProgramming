function isEmail(e){var t=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;return t.test(e)}function isValidPassword(e){var t=/[A-Za-z0-9_-]/;return t.test(e)}function init(url) {$(document).ready(function(){$("input").popover();$("input").popover("hide");$("#submit").click(function(){var e=$("#email").val();var t=$("#pass").val();var n=true;if(e===""||!isEmail(e)){$("#email").popover("show");n=false}if(t===""||t.length<6||!isValidPassword(t)){$("#pass").popover("show");if(n){n=false}}if(!n){return}var r=$.ajax({url:"/oauth/background/login/"+url,dataType:"JSON",data:{email:$("#email").val(),pass:$("#pass").val(),keep:$('#logged-in').attr('data-checked')},type:"POST",error:function(){$('#error').show();}});r.done(function(e){if(e!==undefined){if(e.valid){$("#body").html(e.html)}else{if(url !== ''){window.location=e.url;}else{$('#error').show();}}}});});$("input").focusin(function(){$(this).popover("hide")});$("input").click(function(){$("input").popover("hide");}); $('#logged-in').change(function(){$(this).attr('data-checked', ($(this).attr('data-checked') == '1') ? '0' : '1');});});}